(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ansi-color-names-vector
   ["#343d46" "#d54e53" "#b9ca4a" "#e7c547" "#7aa6da" "#c397d8" "#7aa6da" "#dfe1e8"])
 '(ansi-term-color-vector
   [unspecified "#343d46" "#d54e53" "#b9ca4a" "#e7c547" "#7aa6da" "#c397d8" "#7aa6da" "#dfe1e8"])
 '(column-number-mode t)
 '(custom-safe-themes
   (quote
    ("aae95fc700f9f7ff70efbc294fc7367376aa9456356ae36ec234751040ed9168" "76bd62f6ce376bf0597fab7f478eaa98cd94a7b41f0ae46de63a958fbe99c1d9" "e8e744a1b0726814ac3ab86ad5ccdf658b9ff1c5a63c4dc23841007874044d4a" "e8bba3c8e8caea2c7a8b6932b0db8d9bdb468c9b44bf554f37b56093d23fde57" "f2503f0a035c2122984e90eb184185769ee665de5864edc19b339856942d2d2d" "0b6645497e51d80eda1d337d6cabe31814d6c381e69491931a688836c16137ed" "db9feb330fd7cb170b01b8c3c6ecdc5179fc321f1a4824da6c53609b033b2810" "f1a6cbc40528dbee63390fc81da426f1b00b4fc09a60fe35752f5838b12fbe0a" "0ae52e74c576120c6863403922ee00340a3bf3051615674c4b937f9c99b24535" "930227e22122d1881db7c2c1ae712dcf715697a1c4d9864f8107a2c3c2da9f8b" "d1a42ed39a15a843cccadf107ee0242b5f78bfbb5b70ba3ce19f3ea9fda8f52d" "91fba9a99f7b64390e1f56319c3dbbaed22de1b9676b3c73d935bf62277b799c" "d69a0f6d860eeff5ca5f229d0373690782a99aee2410a3eed8a31332a7101f1e" "cb18233197cedab557c70d171b511bed49cc702f428750925280090c31498bd2" "1edf370d2840c0bf4c031a044f3f500731b41a3fd96b02e4c257522c7457882e" "0bd7a42bd443517e5e61dac3cabc24018fbd0c6b2b4199b3c4efd9e3727efd30" "b1bcb837df0455af8e91114b7a3bddfa084cde32ceb16b1b468d5e5e8605a835" "e1551b5516e0a439b6ab019ba00cee866e735f66f22ff67a5d882ad0f1383454" "64da9a8dba17dcf210420875eba3f1a5ea6272217dc403706e4e2c985aa537fa" "e24679edfdea016519c0e2d4a5e57157a11f928b7ef4361d00c23a7fe54b8e01" "cdfb22711f64d0e665f40b2607879fcf2607764b2b70d672ddaa26d2da13049f" "90b1aeef48eb5498b58f7085a54b5d2c9efef2bb98d71d85e77427ce37aec223" "bf81a86f9cfa079a7bb9841bc6ecf9a2e8999b85e4ae1a4d0138975921315713" "75c0b9f9f90d95ac03f8647c75a91ec68437c12ff598e2abb22418cd4b255af0" "275ed2b17e22759bed06564fddbb703c7b0893c76d17a0f353614f556c46d05e" "59ca830d4df5e79503b79103485d28c6a578ca14d526ffc6a43596808daf1282" "b110da1a5934e91717b5c490709aba3c60eb4595194bbf9fdcbb97d247c70cfa" "e033c4abd259afac2475abd9545f2099a567eb0e5ec4d1ed13567a77c1919f8f" "294834baa9ca874795a3181cce7aaf228b1e3fb3899587ffd3ae7546de328c90" "09669536b4a71f409e7e2fd56609cd7f0dff2850d4cbfb43916cc1843c463b80" "b4ec581daad15aa7020b722523dc6bcea850bfbdbe31bfeb11c45ea51899bd75" "890d09dcc8d2326e98eee74b307b2cc42f07ab7701bcff521e6152aa3e08f7a8" "9f6750057fefba39c184783c7b80ddd9c63bc6e8064846b423b4362c9e930404" "c70cc9c4c6257d70f5c11b90cb9e8b1e54e6edd6aa43f39879746e16a70533f5" "101a10b15bbbd0d5a0e56e4773e614962197886780afb2d62523a63a144ad96c" "e254f8e18ba82e55572c5e18f3ac9c2bd6728a7e500f6cc216e0c6f6f8ea7003" "03e3e79fb2b344e41a7df897818b7969ca51a15a67dc0c30ebbdeb9ea2cd4492" "50e7f9d112e821e42bd2b8410d50de966c35c7434dec12ddea99cb05dd368dd8" "2162da67ce86c514aff010de1b040fb26663ca42afebc2de26515d741121c435" "b6db49cec08652adf1ff2341ce32c7303be313b0de38c621676122f255ee46db" "a7b47876e5da7cac6f5e61cca7a040a365ca2c498823654bd4076add8edf34c5" "232f715279fc131ed4facf6a517b84d23dca145fcc0e09c5e0f90eb534e1680f" "aed73c6d0afcf2232bb25ed2d872c7a1c4f1bda6759f84afc24de6a1aec93da8" "3b0a350918ee819dca209cec62d867678d7dac74f6195f5e3799aa206358a983" default)))
 '(display-time-mode t)
 '(scroll-bar-mode nil)
 '(tool-bar-mode nil))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:family "Inconsolata" :foundry "unknown" :slant normal :weight normal :height 113 :width normal)))))

(require 'package)

(setq package-archives '(("org" . "http://orgmode.org/elpa/")
                         ("gnu" . "http://elpa.gnu.org/packages/")
                         ("melpa" . "http://melpa.org/packages/")
                         ("melpa-stable" . "http://stable.melpa.org/packages/")))

(package-initialize)

;; Installing default packages
(defun ensure-package-installed (&rest packages)
  "Assure every package is installed."
  (mapcar
   (lambda (package)
     (if (package-installed-p package)
	 nil
       (if (y-or-n-p (format "Package %s is missing. Install it? " package))
       (package-install package)
       package)))
  packages))

;; Make sure to have downloaded archive description
(or (file-exists-p package-user-dir)
    (package-refresh-contents))

;; Install my packages
(ensure-package-installed 'iedit 'magit 'evil 'projectile 'helm-projectile 'powerline-evil 'python-mode 'elpy 'railscasts-theme 'evil-magit 'neotree 'full-ack 'flycheck)

(package-initialize)

;; Load ido
(require 'ido)
(ido-mode t)

;; Load Evil-Mode by default
(require 'evil)
(evil-mode t)


;; Load evil-magit
(evil-magit-init)


;; Powerline
(require 'powerline)
(powerline-evil-vim-color-theme)
(display-time-mode t)

;; Load helm by default
(require 'helm-config)
(helm-mode t)

;; Helm configuration
(require 'helm-config)
(require 'helm-misc)
(require 'helm-projectile)
(require 'helm-locate)
(setq helm-quick-update t)
(setq helm-bookmark-show-location t)
(setq helm-buffers-fuzzy-matching t)


(defun helm-all ()
  (interactive)
  (let ((helm-ff-transformer-show-only-basename nil))
    (helm-other-buffer '(helm-source-projectile-files-list
			 helm-source-recentf
		         helm-source-projectile-projects)
		       "*helm-all*")))

;; Load projectile globally
(projectile-global-mode)


;; Load auto bracket
(electric-pair-mode)

;; Use space instead of tabs
(setq indent-tabs-mode nil)

;; Require newline at the end of document
(setq require-final-newline t)

;; Display line numbers
(global-linum-mode t)
(line-number-mode t)

;; Color theme
;;(load-theme 'railscasts t nil)
;;(load-theme 'base16-tomorrow-dark t nil)
(load-theme 'distinguished t)

;; Autoload js mode
(add-to-list 'auto-mode-alist '("\\.js\\'" . js-mode))

;; Autoload elpy
(add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode))

;; Elpy
(elpy-enable)

;; Enable company mode
(global-company-mode)

;; Rope
(setq emacs-config-path "~/.emacs.d/")
   (setq base-lisp-path "~/.emacs.d/site-lisp/")
   (setq site-lisp-path (concat emacs-config-path "/site-lisp"))
   (defun add-path (p)
     (add-to-list 'load-path (concat base-lisp-path p)))
   (add-path "")

(require 'pymacs)
(pymacs-load "ropemacs" "rope-")

;; Neotree
(require 'neotree)


;; Full ack
(autoload 'ack-same "full-ack" nil t)
(autoload 'ack "full-ack" nil t)

;; Ibuffer 
(autoload 'ibuffer "ibuffer" "List buffers." t)

;; Flycheck
(when (require 'flycheck nil t)
  (setq elpy-modules (delq 'elpy-module-flymake elpy-modules))
  (add-hook 'elpy-mode-hook 'flycheck-mode))

;;====================================================
;; Define only keybinds remaps from this point onwards.
;;====================================================

;; Better window navigation
(eval-after-load "evil"
  '(progn
     (define-key evil-normal-state-map (kbd "C-h") 'evil-window-left)
     (define-key evil-normal-state-map (kbd "C-j") 'evil-window-down)
     (define-key evil-normal-state-map (kbd "C-k") 'evil-window-up)
     (define-key evil-normal-state-map (kbd "C-l") 'evil-window-right)
     ))

;; esc quits
(define-key evil-normal-state-map [escape] 'keyboard-quit)
(define-key evil-visual-state-map [escape] 'keyboard-quit)
        
;; Ipython Session
(define-key global-map (kbd "M-i") 'elpy-shell-switch-to-shell)

;; Pyflakes check
(define-key global-map (kbd "M-c") 'elpy-check)

;; Remap documentation
(define-key global-map (kbd "M-k") 'elpy-doc)

;; Remap virtualenv loading
(define-key global-map (kbd "M-v") 'pyvenv-workon)

;; Remap testing
(define-key global-map (kbd "M-a") 'elpy-test)

;; Set keybinding for magit status
(define-key global-map (kbd "M-g") 'magit-status)

;; Change projectile dired access
(global-set-key (kbd "M-e") 'projectile-dired)

;; Set ibuffer access
(global-set-key (kbd "M-b") 'ibuffer)

;; Neotree access
(global-set-key [f2] 'neotree-toggle)

;; Helm access
(global-set-key (kbd "M-p") 'helm-all)
(global-set-key (kbd "M-x") 'helm-M-x)
